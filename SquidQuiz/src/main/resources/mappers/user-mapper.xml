<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="userMapper">
	<resultMap type="User" id="userResultMap">
		<id property="userId" column="USER_ID"/>
		<result property="userPwd" column="USER_PWD"></result>
		<result property="userName" column="USER_NAME"></result>
		<result property="userEmail" column="USER_EMAIL"></result>
		<result property="userPhone" column="USER_PHONE"></result>
		<result property="bankName" column="BANK_NAME"></result>
		<result property="bankAccount" column="BANK_ACCOUNT"></result>
		<result property="userAddr" column="USER_ADDR"/>
		<result property="point" column="POINT"></result>
		<result property="adminType" column="ADMIN_TYPE"></result>
		<result property="gameType" column="GAME_TYPE"></result>
	</resultMap>
	
	<!-- 로그인 -->
	<select id="selectLoginUser" resultMap="userResultMap">
		SELECT * FROM MEMBER WHERE USER_ID =#{userId } AND USER_PWD = #{userPwd }
	</select>
	
	<!-- 아이디중복확인 -->
	<select id="checkIdDup" parameterType="String" resultType="_int">
		SELECT COUNT(*) FROM MEMBER WHERE USER_ID =#{userId }
	</select>
	
	<!-- 아이디 찾기 -->
	<select id="findUserId" resultType="string">
		SELECT USER_ID FROM MEMBER WHERE USER_NAME = #{userName } AND USER_EMAIL = #{userEmail }
	</select>
	
	<!-- 비밀번호 찾기 -->
	<select id="findUserPwd" resultType="string">
		SELECT USER_PWD FROM MEMBER WHERE USER_ID = #{userId } AND USER_EMAIL = #{userEmail }
	</select>
	
	<!-- 마이페이지 포인트 조회 -->
	<select id="selectOnePoint" parameterType="string" resultMap="userResultMap">
		SELECT * FROM MEMBER WHERE USER_ID =#{userId }
	</select>
	
	
	<!-- 회원가입db등록 -->
	<insert id="insertUser" parameterType="User">
		INSERT INTO MEMBER VALUES(SEQ_MEMBER.NEXTVAL, #{userId }, #{userPwd }, #{userName }, #{userEmail }, #{userPhone }, #{bankName }, #{bankAccount }, #{userAddr }, DEFAULT, DEFAULT, DEFAULT)
	</insert>
	
	<!-- 회원정보 수정 -->
	<update id="updateUser" parameterType="User">
		UPDATE MEMBER SET USER_PWD = #{userPwd }, USER_EMAIL = #{userEmail }, USER_PHONE = #{userPhone }, BANK_NAME =#{bankName}, BANK_ACCOUNT =#{bankAccount }, USER_ADDR = #{userAddr } WHERE USER_ID = #{userId }
	</update>
	
	<!-- 회원탈퇴 -->
	<delete id="deleteUser" parameterType="String">
		DELETE FROM MEMBER WHERE USER_ID = #{userId } AND USER_PWD = #{userPwd }
	</delete> 
	
	
</mapper>